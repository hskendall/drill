# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Client defaults.
# See drill-on-yarn-example.conf for details.
# Some properties are private; the are meant for use by the Drill
# developers. Those are marked as private here, and are explained here
# rather than in the example config.

drill.yarn: {
  app-name: "Drill-on-YARN"
  cluster-id: "drillbits1"

  # Settings here support a default single-node cluster on the local host,
  # using the default HDFS connection obtained from the Hadoop config files.

  dfs: {
    connection: ""
    dir: "/user/drill"
  }

  drill-install: {
    localize: true
    drill-home: ""
    client-path: ""
    dir-name: ""

    # Key used for the Drill archive file in the AM launch config.
    # Not usually changed by users.

    key: "drill"
  }

  # Copy of the ZK parameters in drill's configuration.
  # Should read directly from Drill at some point.
  # This setup supports the default Drill single-node cluster.

  zk: {
    connect: "localhost:2181",
    root: "drill",
    refresh: 500,
    timeout: 5000,
    retry: {
      count: 7200,
      delay: 500
    }
  }

  am: {
    memory-mb: 128
    vcores: 1

    # Heap memory for the AM passed via the DRILL_AM_HEAP environment variable.

    heap: "256M"

    # Arguments passed to the AM JVM. (Private)

    vm-args: ""

    # AM-to-RM period in ms. (Private)

    poll-ms: 1000

    # AM clock tick period in ms. (Private)

    tick-ms: 2000

    # Set to true to dump launch variables and command to log.

    debug-launch: false

    # Extra class path for AM. The path must be valid on all nodes on which
    # the AM may run.
    # Not normally used; provided only for special cases to avoid editing
    # the launch script.

    class-path: ""
  }

  drillbit: {
    memory-mb: 4096
    vcores: 4
    heap: "4G"
    max-direct-memory: "8G"

    # Additional JVM arguments for the drillbit (Private)
    # The value here is appended to any set in the launch script.

    vm-args: ""

    # Set to true to turn on garbage collection logging.

    log-gc: false

    # Extra class path for Drill-bit. The path must be valid on all nodes.
    # Not normally used; provided only for special cases to avoid editing
    # the launch script.

    class-path: ""

    # Maximum number of retries of each Drillbit before blacklisting the node.

    max-retries: 3

    # Set to true to dump launch variables and command to log.

    debug-launch: false

    # Set here because a Drillbit does not advertise its port.

    http-port: 8047
  }

  http: {
    enabled: true
    port: 8048
  }

  pools: [

    # Defined to support a demo single-node cluster.

    {
      name: "default"
      type: "basic"
      count: 1
    }
  ]
}